<!-- Imports polymer -->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-menu/paper-menu.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">

<link rel="stylesheet" type="text/css" href="glycopeptide-heatmap.css">

<!-- Import d3 and heatmap generating script -->
<script src="../d3/d3.js"></script>
<script src="../d3-tip/index.js"></script>
<script src="colorbar.js"></script>

<!-- Defines element markup -->
<dom-module id="glycopeptide-heatmap">
    <template>
        <style is="sort-style">
            paper-dropdown-menu {
                --paper-input-container-label: {
                    color: white;
                    background-color: var(--paper-green-500);
                    font-style: italic;
                    text-align: center;
                    font-weight: bold;
                };
                --paper-input-container-input: {
                    color: var(--paper-indigo-500);
                    font-style: normal;
                    font-family: serif;
                    text-transform: uppercase;
                };
                /* no underline */
                --paper-input-container-underline: {
                    display: none;
                };
            }

            paper-item {
                display: block;
                position: relative;
                min-height: 32px;
                padding: 0px 16px;
                display: -ms-flexbox;
                display: -webkit-flex;
                display: flex;
                -ms-flex-direction: row;
                -webkit-flex-direction: row;
                flex-direction: row;
                -ms-flex-align: center;
                -webkit-align-items: center;
                align-items: center;
                font-family: 'Roboto', 'Noto', sans-serif;
                -webkit-font-smoothing: antialiased;
                font-size: 16px;
                font-weight: 400;
                line-height: 24px;
            }

            .hidden {
                display: none;
            }
            paper-dropdown-menu {
                width: 100%;
            }

            paper-dropdown-menu paper-menu-button {
                width: 100%;
                padding: 0;
            }
            
            div#description {
                margin-left: 80px;
                margin-top: 18px;
                margin-right: 100px;
            }
            
        </style>
        <iron-ajax
            id="ajax"
            method="GET"
            url="http://localhost:8080/proteins/"
            handle-as="json"
            on-response="handleResponse"
            on-error="handleErrorResponse"
            debounce-duration="300">
        </iron-ajax>
        <div style="display: inline-flex; position: absolute;">
        <div id="description"></div>
        <paper-dropdown-menu id="sorting" label="Sort by" class="sort hidden">
            <paper-menu class="dropdown-content" selected="{{sorting}}" attr-for-selected="value">
                <paper-item value="sequence&composition">
                    Peptide sequence and glycan composition
                </paper-item>
            </paper-menu>
        </paper-dropdown-menu></div>
        <div id="comment" class="hidden" style="position: absolute; margin-top: 180px; margin-left:90px;">
            Match accuracy (ppm)
        </div>
        <div id="chart"></div>
        <div id="tooltip" class="hidden">
            <div id="value"></div>
        </div>
    </template>
    <!-- Registers custom element -->
    <script src="glycopeptide-heatmap.js"></script>
</dom-module>
